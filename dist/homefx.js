const sensitivity=.01,updateTime=132,drawTime=66,alpha=.15,occasion=24;document.addEventListener("DOMContentLoaded",e=>{const g=window.innerWidth,b=window.innerHeight;for(var t,a,r,d,u,h,m,f,j,y,v=document.getElementById("chromatic"),p=v.children[0],n=[],c=0;c<3;c++)n.push(p.cloneNode(!0)),n[c].style.position="absolute",n[c].style.top=0,n[c].style.mixBlendMode="screen",n[c].style.textShadow="0 0 1vh",v.appendChild(n[c]);p.style.opacity=0,n[0].style.color="#ff0000",n[1].style.color="#00ff00",n[2].style.color="#0000ff",n[0].style.userSelect="none",n[1].style.userSelect="none",document.addEventListener("mousemove",e=>{n[0].style.left=sensitivity*(e.clientX-.5*g)+"px",n[0].style.top=sensitivity*(e.clientY-.5*b)+"px",n[2].style.left=-sensitivity*(e.clientX-.5*g)+"px",n[2].style.top=-sensitivity*(e.clientY-.5*b)+"px"}),document.querySelectorAll("p").forEach(e=>{e.style.textShadow="0 0 1vh black, 0 0 1vh black, 0 0 1vh black, 0 0 1vh black"});const s=document.createElement("canvas");s.width=window.innerWidth,s.height=window.innerHeight,s.style.zIndex=-10,s.style.margin=0,s.style.position="fixed",s.style.top=0,s.style.left=0,s.style.height="100vh",r=s.getContext("2d"),r.fillStyle="black",r.fillRect(0,0,s.width,s.height),r.globalAlpha=alpha;const o=32,i=Math.ceil(32*s.width/s.height),l=s.height/o;for(a=[],t=[],u=0;u<o;u++){for(h=[],m=0;m<i;m++)j=Math.round(Math.random()),h.push(j);a.push(h)}f=a,d=0,setTimeout(()=>{y=setInterval(()=>{for(var e,s,n=0;n<o;n++)for(e=0;e<i;e++){switch(s=a[n][e]+t[n][e],s){case 0:r.fillStyle="#000";break;case 1:r.fillStyle="#111";break;case 2:r.fillStyle="#222";break}r.fillRect(e*l,n*l,l,l)}},drawTime)},updateTime);const _=setInterval(()=>{t=a,a=[];for(var e,s,r,n=0;n<o;n++){for(s=[],e=0;e<i;e++){const a=t[(n-1+o)%o][(e-1+i)%i]+t[n][(e-1+i)%i]+t[(n+1)%o][(e-1+i)%i]+t[(n-1+o)%o][e]+t[(n+1)%o][e]+t[(n-1+o)%o][(e+1)%i]+t[n][(e+1)%i]+t[(n+1)%o][(e+1)%i];t[n][e]==0&&a==3||t[n][e]==1&&a!=2&&a!=3?s.push(1-t[n][e]):s.push(t[n][e])}a.push(s)}if(d++,d===occasion){d=0,r=!0;staleCheck:for(n=0;n<o;n++)for(e=0;e<i;e++)if(a[n][e]!==f[n][e]){r=!1;break staleCheck}r&&(clearInterval(y),clearInterval(_)),f=a}},updateTime);document.body.appendChild(s)})